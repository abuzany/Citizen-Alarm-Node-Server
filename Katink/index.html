<!doctype html>
<html>
  <head>
    <title>Citizen Alarm Monitor</title>
      <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
      <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBHbuYXebtBZeJzBCvNzsXuTI_G_H7sNMk &callback=initMap"></script>
      <script>

          var socket = io();
          
          /*$(document).ready(function () {

              // map options
              var options = {
                  zoom: 5,
                  center: new google.maps.LatLng(19.432608, -99.133208), // centered Mx
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  mapTypeControl: false
              };

              // init map
              var map = new google.maps.Map(document.getElementById('map'), options);
              var map2 = new google.maps.Map(document.getElementById('map2'), options);

              $.getJSON('http://192.168.1.69:61660/api/alerts', function (data) {
                  // set multiple marker
                  for (var i = 0; i < data.length; i++) {
                      //Add info
                      var tr = '<tr><td>' + data[i].Id + '</td><td>' + data[i].UserId + '</td><td>' + data[i].Latitude + '</td><td>' + data[i].Longitude + '</td><td>' + data[i].CreationDate + '</td></tr>';

                      $("#tblAlarmsHistory tbody").append(tr)

                      // init markers
                      var marker = new google.maps.Marker({
                          position: new google.maps.LatLng(data[i].Latitude, data[i].Longitude),
                          map: map,
                          title: 'Click Me ' + i
                      });

                      // process multiple info windows
                      (function (marker, i) {
                          // add click event
                          google.maps.event.addListener(marker, 'click', function () {
                              infowindow = new google.maps.InfoWindow({
                                  content: 'Hello, World!!'
                              });
                              infowindow.open(map, marker);
                          });
                      })(marker, i);
                  }
              });

              /////////////////////////////////////////////////
              //////////////////Listenners////////////////////
              ///////////////////////////////////////////////
              socket.on('onJoin', function (data) {

                  var tr = '<tr><td>' + data.userId + '</td><td>' + data.latitude + '</td><td>' + data.longitude + '</td></tr>';

                  $("#tblUsersConnected tbody").append(tr)

                  var myLatLng = { lat: data.latitude, lng: data.longitude };

                  var marker = new google.maps.Marker({
                      position: myLatLng,
                      map: map2,
                      title: 'Hello World!'
                  });
              });

              socket.on('onLogoff', function (data) {

              });
          });

          //////////////////////////////////////////////
          //////////////////Dispachers/////////////////
          ////////////////////////////////////////////
          //socket.emit('onGetUsersConnected', "");

          ////////////////////////////////////////////
          /////////////////Methods///////////////////
          //////////////////////////////////////////
          */
      </script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
      <style>
          #map, #map2 {
            display: block;
            width: 100%;
            height: 300px;
          }
      </style>
  </head>
  <body>
      <br />
      <div class="container-fluid">
          <div class="row">
              <div class="col-md-6">
                  <div id="map"></div>
              </div>
              <div class="col-md-6">
                  <div id="map2"></div>
              </div>
          </div>
          <div class="row">
              <div class="col-md-6">
                  <table id="tblAlarmsHistory" class="table table-bordered">
                      <thead>
                          <tr>
                              <td>Id</td>
                              <td>UserId</td>
                              <td>Latitude</td>
                              <td>Longitude</td>
                              <td>Date</td>
                          </tr>
                      </thead>
                      <tbody></tbody>
                  </table>
              </div>
              <div class="col-md-6">
                  <table id="tblUsersConnected" class="table table-bordered">
                      <thead>
                          <tr>
                              <td>UserId</td>
                              <td>Latitude</td>
                              <td>Longitude</td>
                          </tr>
                      </thead>
                      <tbody></tbody>
                  </table>
              </div>
          </div>
      </div>
  </body>
</html>